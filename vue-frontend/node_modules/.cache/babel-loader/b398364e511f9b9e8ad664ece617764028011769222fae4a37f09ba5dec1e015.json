{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"image-recognition-container\"\n};\nconst _hoisted_2 = {\n  class: \"upload-section\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"result-section\"\n};\nconst _hoisted_4 = {\n  class: \"result-content\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"recognition-result\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_header = _resolveComponent(\"el-header\");\n  const _component_upload_filled = _resolveComponent(\"upload-filled\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_main = _resolveComponent(\"el-main\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_header, {\n    class: \"header\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.push('/menu'))\n    }, {\n      default: _withCtx(() => [...(_cache[1] || (_cache[1] = [_createTextVNode(\"返回菜单\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), _cache[2] || (_cache[2] = _createElementVNode(\"h2\", null, \"图像识别\", -1 /* CACHED */))]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_main, {\n    class: \"main\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_upload, {\n      ref: \"uploadRef\",\n      class: \"upload-demo\",\n      drag: \"\",\n      action: $setup.uploadAction,\n      headers: $setup.uploadHeaders,\n      \"on-success\": $setup.handleUploadSuccess,\n      \"on-error\": $setup.handleUploadError,\n      \"before-upload\": $setup.beforeUpload,\n      \"show-file-list\": false,\n      accept: \"image/*\"\n    }, {\n      tip: _withCtx(() => [...(_cache[3] || (_cache[3] = [_createElementVNode(\"div\", {\n        class: \"el-upload__tip\"\n      }, \"只能上传jpg/png文件，且不超过10MB\", -1 /* CACHED */)]))]),\n      default: _withCtx(() => [_createVNode(_component_el_icon, {\n        class: \"el-icon--upload\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_upload_filled)]),\n        _: 1 /* STABLE */\n      }), _cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n        class: \"el-upload__text\"\n      }, [_createTextVNode(\" 将图片拖到此处，或\"), _createElementVNode(\"em\", null, \"点击上传\")], -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"action\", \"headers\", \"on-success\", \"on-error\", \"before-upload\"])]), $setup.result ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode(_component_el_card, {\n      class: \"result-card\"\n    }, {\n      header: _withCtx(() => [...(_cache[5] || (_cache[5] = [_createElementVNode(\"div\", {\n        class: \"card-header\"\n      }, [_createElementVNode(\"span\", null, \"识别结果\")], -1 /* CACHED */)]))]),\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"img\", {\n        src: $setup.imageUrl,\n        alt: \"上传的图片\",\n        class: \"uploaded-image\"\n      }, null, 8 /* PROPS */, _hoisted_5), _createElementVNode(\"div\", _hoisted_6, [_cache[6] || (_cache[6] = _createElementVNode(\"h3\", null, \"识别内容：\", -1 /* CACHED */)), _createElementVNode(\"p\", null, _toDisplayString($setup.result), 1 /* TEXT */)])])]),\n      _: 1 /* STABLE */\n    })])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_header","_component_el_button","type","onClick","_cache","$event","_ctx","$router","push","_createElementVNode","_component_el_main","_hoisted_2","_component_el_upload","ref","drag","action","$setup","uploadAction","headers","uploadHeaders","handleUploadSuccess","handleUploadError","beforeUpload","accept","tip","_withCtx","_component_el_icon","_component_upload_filled","result","_hoisted_3","_component_el_card","header","_hoisted_4","src","imageUrl","alt","_hoisted_6","_toDisplayString"],"sources":["/root/GopherAI/GopherAI-/vue-frontend/src/views/ImageRecognition.vue"],"sourcesContent":["<template>\n  <div class=\"image-recognition-container\">\n    <el-header class=\"header\">\n      <el-button type=\"primary\" @click=\"$router.push('/menu')\">返回菜单</el-button>\n      <h2>图像识别</h2>\n    </el-header>\n    <el-main class=\"main\">\n      <div class=\"upload-section\">\n        <el-upload\n          ref=\"uploadRef\"\n          class=\"upload-demo\"\n          drag\n          :action=\"uploadAction\"\n          :headers=\"uploadHeaders\"\n          :on-success=\"handleUploadSuccess\"\n          :on-error=\"handleUploadError\"\n          :before-upload=\"beforeUpload\"\n          :show-file-list=\"false\"\n          accept=\"image/*\"\n        >\n          <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\n          <div class=\"el-upload__text\">\n            将图片拖到此处，或<em>点击上传</em>\n          </div>\n          <template #tip>\n            <div class=\"el-upload__tip\">只能上传jpg/png文件，且不超过10MB</div>\n          </template>\n        </el-upload>\n      </div>\n      <div v-if=\"result\" class=\"result-section\">\n        <el-card class=\"result-card\">\n          <template #header>\n            <div class=\"card-header\">\n              <span>识别结果</span>\n            </div>\n          </template>\n          <div class=\"result-content\">\n            <img :src=\"imageUrl\" alt=\"上传的图片\" class=\"uploaded-image\" />\n            <div class=\"recognition-result\">\n              <h3>识别内容：</h3>\n              <p>{{ result }}</p>\n            </div>\n          </div>\n        </el-card>\n      </div>\n    </el-main>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { UploadFilled } from '@element-plus/icons-vue'\nimport api from '../utils/api'\n\nexport default {\n  name: 'ImageRecognition',\n  components: {\n    UploadFilled\n  },\n  setup() {\n    const uploadRef = ref()\n    const result = ref('')\n    const imageUrl = ref('')\n    const uploadAction = ref(`${api.defaults.baseURL}/image/recognize`)\n    const uploadHeaders = ref({\n      Authorization: `Bearer ${localStorage.getItem('token')}`\n    })\n\n    const beforeUpload = (file) => {\n      const isImage = file.type.startsWith('image/')\n      const isLt10M = file.size / 1024 / 1024 < 10\n\n      if (!isImage) {\n        ElMessage.error('只能上传图片文件!')\n        return false\n      }\n      if (!isLt10M) {\n        ElMessage.error('上传图片大小不能超过 10MB!')\n        return false\n      }\n      return true\n    }\n\n    const handleUploadSuccess = (response, file) => {\n      if (response.code === 200) {\n        result.value = response.data.result\n        imageUrl.value = URL.createObjectURL(file.raw)\n        ElMessage.success('识别成功!')\n      } else {\n        ElMessage.error(response.message || '识别失败')\n      }\n    }\n\n    const handleUploadError = (error) => {\n      console.error('Upload error:', error)\n      ElMessage.error('上传失败，请重试')\n    }\n\n    return {\n      uploadRef,\n      result,\n      imageUrl,\n      uploadAction,\n      uploadHeaders,\n      beforeUpload,\n      handleUploadSuccess,\n      handleUploadError\n    }\n  }\n}\n</script>\n\n<style scoped>\n.image-recognition-container {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.header {\n  background-color: #409eff;\n  color: white;\n  display: flex;\n  align-items: center;\n  padding: 0 20px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.header h2 {\n  margin: 0 0 0 20px;\n  font-size: 20px;\n}\n\n.main {\n  flex: 1;\n  padding: 40px;\n  background: #f5f7fa;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.upload-section {\n  width: 100%;\n  max-width: 600px;\n  margin-bottom: 40px;\n}\n\n.upload-demo {\n  width: 100%;\n}\n\n.result-section {\n  width: 100%;\n  max-width: 800px;\n}\n\n.result-card {\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n}\n\n.card-header {\n  font-weight: bold;\n  color: #409eff;\n}\n\n.result-content {\n  display: flex;\n  gap: 30px;\n  align-items: flex-start;\n}\n\n.uploaded-image {\n  max-width: 300px;\n  max-height: 300px;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.recognition-result {\n  flex: 1;\n}\n\n.recognition-result h3 {\n  margin-top: 0;\n  color: #303133;\n}\n\n.recognition-result p {\n  line-height: 1.6;\n  color: #606266;\n  white-space: pre-wrap;\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAA6B;;EAM/BA,KAAK,EAAC;AAAgB;;;EAsBRA,KAAK,EAAC;;;EAOhBA,KAAK,EAAC;AAAgB;;;EAEpBA,KAAK,EAAC;AAAoB;;;;;;;;;uBArCzCC,mBAAA,CA6CM,OA7CNC,UA6CM,GA5CJC,YAAA,CAGYC,oBAAA;IAHDJ,KAAK,EAAC;EAAQ;sBACvB,MAAyE,CAAzEG,YAAA,CAAyEE,oBAAA;MAA9DC,IAAI,EAAC,SAAS;MAAEC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAC,OAAO,CAACC,IAAI;;wBAAW,MAAI,KAAAJ,MAAA,QAAAA,MAAA,O,iBAAJ,MAAI,mB;;kCAC7DK,mBAAA,CAAa,YAAT,MAAI,oB;;MAEVV,YAAA,CAuCUW,kBAAA;IAvCDd,KAAK,EAAC;EAAM;sBACnB,MAqBM,CArBNa,mBAAA,CAqBM,OArBNE,UAqBM,GApBJZ,YAAA,CAmBYa,oBAAA;MAlBVC,GAAG,EAAC,WAAW;MACfjB,KAAK,EAAC,aAAa;MACnBkB,IAAI,EAAJ,EAAI;MACHC,MAAM,EAAEC,MAAA,CAAAC,YAAY;MACpBC,OAAO,EAAEF,MAAA,CAAAG,aAAa;MACtB,YAAU,EAAEH,MAAA,CAAAI,mBAAmB;MAC/B,UAAQ,EAAEJ,MAAA,CAAAK,iBAAiB;MAC3B,eAAa,EAAEL,MAAA,CAAAM,YAAY;MAC3B,gBAAc,EAAE,KAAK;MACtBC,MAAM,EAAC;;MAMIC,GAAG,EAAAC,QAAA,CACZ,MAAwD,KAAArB,MAAA,QAAAA,MAAA,OAAxDK,mBAAA,CAAwD;QAAnDb,KAAK,EAAC;MAAgB,GAAC,wBAAsB,mB;wBALpD,MAA4D,CAA5DG,YAAA,CAA4D2B,kBAAA;QAAnD9B,KAAK,EAAC;MAAiB;0BAAC,MAAiB,CAAjBG,YAAA,CAAiB4B,wBAAA,E;;oCAClDlB,mBAAA,CAEM;QAFDb,KAAK,EAAC;MAAiB,I,iBAAC,YAClB,GAAAa,mBAAA,CAAa,YAAT,MAAI,E;;2FAOZO,MAAA,CAAAY,MAAM,I,cAAjB/B,mBAAA,CAeM,OAfNgC,UAeM,GAdJ9B,YAAA,CAaU+B,kBAAA;MAbDlC,KAAK,EAAC;IAAa;MACfmC,MAAM,EAAAN,QAAA,CACf,MAEM,KAAArB,MAAA,QAAAA,MAAA,OAFNK,mBAAA,CAEM;QAFDb,KAAK,EAAC;MAAa,IACtBa,mBAAA,CAAiB,cAAX,MAAI,E;wBAGd,MAMM,CANNA,mBAAA,CAMM,OANNuB,UAMM,GALJvB,mBAAA,CAA0D;QAApDwB,GAAG,EAAEjB,MAAA,CAAAkB,QAAQ;QAAEC,GAAG,EAAC,OAAO;QAACvC,KAAK,EAAC;2CACvCa,mBAAA,CAGM,OAHN2B,UAGM,G,0BAFJ3B,mBAAA,CAAc,YAAV,OAAK,qBACTA,mBAAA,CAAmB,WAAA4B,gBAAA,CAAbrB,MAAA,CAAAY,MAAM,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}